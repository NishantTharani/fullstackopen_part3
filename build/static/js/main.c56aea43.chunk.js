(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(14),a=t.n(r),o=(t(19),t(3)),i=t(4),u=t.n(i),s="/api/persons",d=function(){return u.a.get(s).then((function(e){return e.data}))},l=function(e){return u.a.post(s,e).then((function(e){return e.data}))},h=function(e){return u.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},b=function(e,n){return u.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),j=function(e){var n=e.nameFilter,t=e.handleNameFilterChange;return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.newName,t=e.newNumber,c=e.handleNameChange,r=e.handleNumberChange,a=e.handleSubmit;return Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:n,onChange:c})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:t,onChange:r})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",onClick:a,children:"add"})})]})},O=function(e){var n=e.persons,t=e.nameFilter,c=e.handleDelete;return n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return Object(f.jsxs)("div",{children:[e.name," ",e.number,Object(f.jsx)("button",{onClick:function(){return c(e.id,e.name)},children:"Delete"})]},e.id)}))},p=function(e){var n=e.message,t=e.type,c={};return"error"===t?c={color:"red",background:"lightgrey",fontSize:"20px"}:"added"===t&&(c={color:"green",background:"lightblue",fontSize:"20px"}),Object(f.jsx)("div",{style:c,className:"notification",children:n})},g=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),i=Object(o.a)(a,2),u=i[0],s=i[1],g=Object(c.useState)(""),x=Object(o.a)(g,2),v=x[0],w=x[1],C=Object(c.useState)(""),N=Object(o.a)(C,2),S=N[0],y=N[1],k=Object(c.useState)(""),F=Object(o.a)(k,2),D=F[0],T=F[1],z=Object(c.useState)(""),E=Object(o.a)(z,2),I=E[0],J=E[1];Object(c.useEffect)((function(){d().then((function(e){r(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(p,{message:D,type:"added"}),Object(f.jsx)(p,{message:I,type:"error"}),Object(f.jsx)(j,{nameFilter:S,handleNameFilterChange:function(e){y(e.target.value.toLowerCase())}}),Object(f.jsx)("h2",{children:"add a new"}),Object(f.jsx)(m,{newName:u,newNumber:v,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){w(e.target.value)},handleSubmit:function(e){e.preventDefault();var n={name:u,number:v},c=t.filter((function(e){return e.name===u}));c.length>0?(console.log("Updating entry for ".concat(u)),b(c[0].id,n).then((function(e){r(t.filter((function(e){return e.name!==u})).concat(e)),s(""),T("Updated ".concat(n.name)),setTimeout((function(){T("")}),4e3)})).catch((function(e){J(e.response.data.error),setTimeout((function(){J("")}),4e3)}))):l(n).then((function(e){r(t.concat(e)),s(""),T("Added ".concat(n.name)),setTimeout((function(){T("")}),4e3)})).catch((function(e){J(e.response.data.error),setTimeout((function(){J("")}),4e3)}))}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(O,{persons:t,nameFilter:S,handleDelete:function(e,n){console.log(e),window.confirm("Sure you want to delete ".concat(n,"?"))&&h(e).then((function(n){r(t.filter((function(n){return n.id!==e})))})).catch((function(c){r(t.filter((function(n){return n.id!==e}))),J("Information of ".concat(n," has already been removed from the server"))}))}})]})};a.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c56aea43.chunk.js.map